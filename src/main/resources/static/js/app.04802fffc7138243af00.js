webpackJsonp([1],{A6ZY:function(t,e){},AGpv:function(t,e,i){"use strict";function a(t){i("PM0b")}var n=i("Ilv7"),o=i("RbCK"),s=i("VU/8"),r=a,c=s(n.a,o.a,!1,r,"data-v-4caafde9",null);e.a=c.exports},E51W:function(t,e){},Ilv7:function(t,e,i){"use strict";var a=i("P9l9");e.a={name:"face",data:function(){return{showSnap:!1,userId:"",bind:!1,reco:"",noticeContent:"",dialog:!1,video:null,width:0,height:0,faceToken:"",img:"",thresholds:{1e-5:"",1e-4:"",.001:""},results:[],imgg:"data:image/png;base64,joiajvojoaifevalkjoeaijfoijfaofjiefoiwajfojoewjoijhkjhkjhkjhlkjoijoijojoijoijoijoijoijoijoijoijojjjlkjljoijojoijoijoijojojoi"}},methods:{closeBind:function(){this.bind=!1},recoImg:function(){this.serch()},close:function(){this.dialog=!1},serch:function(){var t=this;this.screenShot();var e={face:this.img};i.i(a.a)(e).then(function(e){403===e.data.status&&(t.noticeContent=e.data.msg,t.dialog=!0,t.clearShot()),200===e.data.status&&(t.clearShot(),t.results=e.data.results,t.thresholds=e.data.thresholds,t.showSnap=!0)}).catch(function(t){console.log(t)})},bindUserId:function(){var t=this,e={face_token:this.faceToken,user_id:this.userId};i.i(a.b)(e).then(function(e){200===e.data.status&&(t.bind=!1,t.noticeContent=e.data.msg,t.dialog=!0)}).catch(function(t){alert(t),console.log(t)})},faceIn:function(){var t=this;this.screenShot();var e={face:this.img};i.i(a.c)(e).then(function(e){403===e.data.status&&(t.noticeContent=e.data.msg,t.dialog=!0,t.clearShot()),200===e.data.status&&(t.faceToken=e.data.face_token,t.bind=!0,t.clearShot())})},screenShot:function(){this.video=document.getElementById("video"),this.width=this.video.width,this.height=this.video.height;var t=document.getElementById("canvas");t.width=this.width,t.height=this.height,t.getContext("2d").drawImage(this.video,0,0,this.width,this.width);var e=t.toDataURL("image/png");this.img=e},clearShot:function(){var t=document.getElementById("canvas");t.width=this.width,t.height=this.height,t.getContext("2d").clearRect(0,0,this.width,this.height)},liveVide:function(){var t=window.URL||window.webkitURL;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia({video:!0},function(e){this.video=document.getElementById("video"),this.width=this.video.width,this.height=this.video.height,this.video.src=t.createObjectURL(e),this.video.play()},function(t){alert(t.name),console.log(t.name||t)})}},mounted:function(){this.liveVide()}}},M93x:function(t,e,i){"use strict";function a(t){i("A6ZY")}var n=i("xJD8"),o=i("jbby"),s=i("VU/8"),r=a,c=s(n.a,o.a,!1,r,null,null);e.a=c.exports},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n=i("M93x"),o=i("/ocq"),s=i("YaEn"),r=i("u64Q"),c=i.n(r),d=i("E51W");i.n(d);a.default.use(o.a),a.default.use(c.a);var l={mode:"hash",routes:s.a},h=new o.a(l);new a.default({el:"#app",router:h,render:function(t){return t(n.a)}})},P9l9:function(t,e,i){"use strict";function a(t){return c({url:"/face_in",method:"post",data:t})}function n(t){return c({url:"/search_faces",method:"post",data:t})}function o(t){return c({url:"/bind_user",method:"get",params:t})}e.c=a,e.a=n,e.b=o;var s=i("mtWM"),r=i.n(s),c=r.a.create({timeout:1e4})},PM0b:function(t,e){},RbCK:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),t._v(" "),t._m(1),t._v(" "),t.showSnap?i("div",{staticClass:"msg"},[i("h3",[t._v("结果  [0,100]")]),t._v(" "),t._l(t.results,function(e){return i("p",[t._v("userId==="+t._s(e.user_id)+",准确率:"+t._s(e.confidence))])}),t._v(" "),i("h3",[t._v("误识率 [0,100]")]),t._v(" "),i("p",[t._v("1e-5(十万分之一):"+t._s(t.thresholds["1e-5"]))]),t._v(" "),i("p",[t._v("1e-4(万分之一):"+t._s(t.thresholds["1e-4"]))]),t._v(" "),i("p",[t._v("1e-3(千分之一):"+t._s(t.thresholds["1e-3"]))]),t._v(" "),i("p",[t._v(t._s(t.thresholds))])],2):t._e(),t._v(" "),i("div",{staticClass:"tools"},[i("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"人脸录入",primary:""},on:{click:t.faceIn}}),t._v(" "),i("mu-raised-button",{staticClass:"demo-raised-button",attrs:{label:"人脸识别",secondary:""},on:{click:t.recoImg}})],1),t._v(" "),i("mu-dialog",{attrs:{open:t.bind,title:"绑定用户"},on:{close:t.closeBind}},[i("mu-text-field",{attrs:{label:"请输入用户ID",type:"text"},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}}),t._v(" "),i("mu-flat-button",{attrs:{slot:"actions",primary:"",label:"取消"},on:{click:t.closeBind},slot:"actions"}),t._v(" "),i("mu-flat-button",{attrs:{slot:"actions",primary:"",label:"确定"},on:{click:t.bindUserId},slot:"actions"})],1),t._v(" "),i("mu-dialog",{attrs:{open:t.dialog,title:"提示"},on:{close:t.close}},[t._v("\n    "+t._s(t.noticeContent)+"\n    "),i("mu-flat-button",{attrs:{slot:"actions",primary:"",label:"确定"},on:{click:t.close},slot:"actions"})],1)],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video"},[i("video",{attrs:{id:"video",height:"200",width:"145"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"snap"},[i("canvas",{attrs:{id:"canvas"}})])}],o={render:a,staticRenderFns:n};e.a=o},YaEn:function(t,e,i){"use strict";var a=i("AGpv"),n=[{name:"index",path:"/",component:a.a}];e.a=n},jbby:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},n=[],o={render:a,staticRenderFns:n};e.a=o},xJD8:function(t,e,i){"use strict";e.a={}}},["NHnr"]);
//# sourceMappingURL=app.04802fffc7138243af00.js.map